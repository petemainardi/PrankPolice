using System;
using System.Linq;
using System.Collections.Generic;
using UnityEngine;
using PrankPolice;

#pragma warning disable 0649    // Variable declared but never assigned to

namespace PrankPolice
{
    // ============================================================================================
    // ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
    // ============================================================================================
    /**
     *  This class does things...
     */
    // ============================================================================================
    // ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
    // ============================================================================================
    [RequireComponent(typeof(ContactDespawner))]
	public class ContactParticles : MonoBehaviour
	{
        // ========================================================================================
        // Fields
        // ========================================================================================
        [SerializeField] private ParticleSystem Particles;

        // ========================================================================================
        // Mono
        // ========================================================================================
		void Awake()
		{
            GetComponent<ContactDespawner>().DestroyedObject += (pos, dir) =>
            {
                Particles.transform.position = pos;
                Particles.Emit(
                    new ParticleSystem.EmitParams { position = pos, velocity = dir, startColor = UnityEngine.Random.ColorHSV() },
                    100
                    );
                Particles.Play();
            };
		}
        // ========================================================================================
        // Methods
        // ========================================================================================
		
        // ========================================================================================
	}
    // ============================================================================================
    // ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
    // ============================================================================================
}